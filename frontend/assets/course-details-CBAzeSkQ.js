import{r as c,u as Q,f as X,h as Z,i as D,p as g,b as j,y as o,j as s,a as ss,I as k,W as R}from"./index-BxtmL2gZ.js";import{R as es,C as ts}from"./ResponsiveMover-U5sZyycB.js";import{S as is}from"./index-BpKUmxwz.js";/* empty css                      */import"./bootstrap.bundle.min-RwnWOMCN.js";import{l as ls}from"./script.esm-BJ5QgV6L.js";const ps=()=>{const[T,M]=c.useState("About"),{token:h,logout:u,isLogin:N,userDetails:x}=Q(),[e,v]=c.useState(""),[n,W]=c.useState(""),[f,B]=c.useState(""),[d,y]=c.useState(""),[G,z]=c.useState([]),[I,P]=c.useState(!1),[H,_]=c.useState(!1),[L,a]=c.useState(!1),{id:K}=X(),U=K,V=Z(),{openLogin:F}=D();c.useEffect(()=>{Y(),N&&$()},[]);const E=async()=>{if(!N)return F();if(a(!0),(e==null?void 0:e.total_amount)===0){let t;d?t="coupon-transaction":t="free-course-transaction";const l={order_type:"course",course_id:e==null?void 0:e.id,transaction_id:t,payment_type:"online",payment_status:"complete",coupon_code:d};g(j.buyCourse,l,h,u).then(i=>{const{success:r,message:m}=i;r===!0?V("/dashboard"):o.error(m)}).catch(i=>console.log(i)).finally(()=>{a(!1)});return}try{const t={order_type:"course",course_id:e==null?void 0:e.id,payment_type:"online",payment_status:"complete",coupon_code:d,amount:e==null?void 0:e.total_amount,success_url:`${R}dashboard`,failure_url:`${R}course/${e==null?void 0:e.slug}`},l=await g(j.createCashFreeOrder,t,h,u),{success:i,payment_session_id:r,message:m}=l;if(!i){o.error(m||"Failed to create order");return}i&&(await ls({mode:"production"})).checkout({paymentSessionId:r,redirectTarget:"_self"})}catch(t){console.error(t),o.error("An error occurred while creating order")}finally{a(!1)}},Y=()=>{a(!0),g(j.courseDetails,{slug:U,user_id:(x==null?void 0:x.id)||0},h,u).then(t=>{const{success:l,data:i,message:r,teachers:m,getServices:b}=t;if(l){v(i);const C=typeof i.teacher_id=="string"?i.teacher_id.split(",").map(p=>parseInt(p.trim())):Array.isArray(i.teacher_id)?i.teacher_id:[],w=typeof i.service_id=="string"?i.service_id.split(",").map(p=>parseInt(p.trim())):Array.isArray(i.service_id)?i.service_id:[],S=m.filter(p=>C.includes(p.id)),A=b.filter(p=>w.includes(p.id));W(S),B(A)}else console.log(r)}).catch(t=>console.log(t)).finally(()=>{a(!1)})},$=()=>{a(!0),g(j.couponList,{user_id:x==null?void 0:x.id,type:"course"},h,u).then(t=>{console.log(t,"coupen");const{success:l,data:i}=t;l?z(i):o.error(i)}).catch(t=>console.log(t)).finally(()=>{a(!1)})},O=t=>{if(!t)return o.error("Please select coupon code!"),!1;a(!0),y(t);const l={coupon_for:"course",coupon_code:t,course_id:e==null?void 0:e.id};g(j.applyCouponApi,l,h,u).then(i=>{const{status:r,msg:m}=i;if(r){const{real_amount:b,discount_amount:C,gst_amount:w,total_amount:S,message:A}=i;v(p=>({...p,offer_price:b,discount_amount:C,gst_amount:w,total_amount:S})),_(!1),o.success(A),P(!1)}else o.error(m)}).catch(i=>console.log(i)).finally(()=>{a(!1)})},q=()=>{if(!d){o.error("No coupon to remove!");return}a(!0);const t={coupon_for:"course",coupon_code:d,course_id:e==null?void 0:e.id,remove:1};g(j.applyCouponApi,t,h,u).then(l=>{const{status:i,message:r}=l;i?(v(m=>({...m,offer_price:e==null?void 0:e.price,discount_amount:0,gst_amount:0,total_amount:e==null?void 0:e.price})),o.success("Coupon removed successfully"),y(""),P(!0)):o.error(r||"Failed to remove coupon")}).catch(l=>console.error(l)).finally(()=>{a(!1)})},J={dots:!1,arrows:!1,infinite:!1,speed:500,slidesToShow:Math.min(n.length,4),slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,responsive:[{breakpoint:1920,settings:{slidesToShow:Math.min(n.length,4)}},{breakpoint:1400,settings:{slidesToShow:Math.min(n.length,3)}},{breakpoint:1200,settings:{slidesToShow:Math.min(n.length,2)}},{breakpoint:992,settings:{slidesToShow:Math.min(n.length,3)}},{breakpoint:767,settings:{slidesToShow:Math.min(n.length,2)}},{breakpoint:575,settings:{slidesToShow:Math.min(n.length,1)}}]};return s.jsxs(s.Fragment,{children:[s.jsx(ss,{visible:L}),s.jsx("style",{children:`
      .teachers-team-card img {
        object-fit: fill;
            aspect-ratio: 1 / 1.2;
      }
.course-details-left-section table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.course-details-left-section table th,
.course-details-left-section table td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
}

.course-details-left-section table th {
  background-color: #f5f5f5;
  font-weight: bold;
}

.course-details-left-section table tr:nth-child(even) {
  background-color: #f9f9f9;
}

.course-details-left-section table tr:hover {
  background-color: #f1f1f1;
}

    `}),s.jsx(es,{}),s.jsx("div",{className:"course-details-page",children:s.jsx("div",{className:"container",children:s.jsxs("div",{className:"row justify-content-between",children:[s.jsx("div",{className:"col-lg-7 col-xxl-8 mb-4",children:s.jsxs("div",{className:"course-details-left-section",children:[s.jsxs("div",{className:"row justify-content-between",children:[s.jsxs("div",{className:"col-lg-12 col-md-6 mb-0 mb-md-4 mb-lg-0",children:[s.jsxs("div",{className:"details-top-badge",children:[s.jsxs("span",{className:"corse-mode-badge",children:[s.jsx("i",{className:"fa-solid fa-video"})," ",e.batch_type]}),s.jsxs("span",{className:"corse-cate-badge",children:["Category: ",(e==null?void 0:e.category_name)||"no category"," "]})]}),s.jsx("h1",{className:"course-detail-heading mb-3",children:e==null?void 0:e.course_name}),s.jsxs("p",{children:[" ",e==null?void 0:e.content]}),e!=null&&e.subject_names?s.jsxs("div",{className:"course-subjects-tag",children:[s.jsx("h2",{className:"sub-heading",children:" Subjects Covered "}),e.subject_names]}):s.jsx("div",{className:"course-subjects-tag",children:"No subjects available"}),s.jsx("div",{className:"course-fee-move"}),s.jsx("div",{className:"buy-btns-details-move"})]}),s.jsx("div",{className:"col-lg-12 col-md-6 mx-auto mb-0 mb-md-4 mb-lg-0",children:s.jsx("div",{className:"mob-details-move"})})]}),s.jsxs("ul",{className:"course-details-tags d-none",children:[s.jsx("li",{className:T==="About"?"active":"",children:s.jsx("a",{className:"course-details-tag-link",href:"#About",onClick:()=>M("About"),children:"About"})}),s.jsx("li",{className:T==="Details"?"active":"",children:s.jsx("a",{className:"course-details-tag-link",href:"#Details",onClick:()=>M("Details"),children:"Details"})})]}),s.jsxs("div",{className:"course-details-about",id:"About",children:[s.jsx("h2",{className:"sub-heading",children:"This Course Includes:"}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-4 mb-3",children:s.jsxs("div",{className:"cd-include-card",children:[s.jsx("h3",{className:"cd-include-heading",children:"Education Level"}),s.jsx("p",{className:"cd-include-text",children:e==null?void 0:e.class_name})]})}),s.jsx("div",{className:"col-md-4 mb-3",children:s.jsxs("div",{className:"cd-include-card",children:[s.jsx("h3",{className:"cd-include-heading",children:"Duration"}),s.jsxs("p",{className:"cd-include-text",children:["Upto ",e==null?void 0:e.duration," ",s.jsx("span",{style:{textTransform:"capitalize"},children:e==null?void 0:e.duration_type})]})]})})]})]}),n&&s.jsxs("div",{className:"course-details-content-card",id:"Teachers",children:[s.jsx("h2",{className:"sub-heading",children:"Know Your Teachers"}),s.jsx("div",{className:"teachers-slider",children:s.jsx(is,{...J,children:n&&n.map(t=>s.jsx("div",{className:"item",children:s.jsxs("div",{className:"teachers-team-card",children:[s.jsx("img",{src:`${k}${t==null?void 0:t.image}`,alt:t==null?void 0:t.name,className:"img-fluid"}),s.jsx("h4",{className:"tname-text",children:t==null?void 0:t.name}),s.jsxs("div",{className:"teacher-profile",children:[s.jsx("p",{className:"tpost-text mb-0",children:t==null?void 0:t.subject}),s.jsxs("p",{className:"texp-text mb-0",children:[t==null?void 0:t.experience,"+ years"]})]})]})},t.id))})})]}),s.jsxs("div",{className:"course-details-content-card",id:"Details",children:[s.jsx("h2",{className:"sub-heading",children:"Know More Details "}),s.jsx("ul",{className:"course-details-context-listing"}),s.jsx("p",{className:"course-details-context",dangerouslySetInnerHTML:{__html:e==null?void 0:e.description}})]})]})}),s.jsx("div",{className:"col-md-8 col-lg-5 col-xxl-4 mb-4",children:s.jsxs("div",{className:"course-card-mover",children:[s.jsxs("div",{className:"course-details-right-card",children:[s.jsx("div",{className:"course-img-slide",children:s.jsx("div",{id:"myCarousel",className:"carousel slide","data-bs-ride":"carousel","data-bs-touch":"true",children:s.jsx("div",{className:"carousel-inner",children:s.jsx("div",{className:"carousel-item active",children:s.jsx("img",{src:`${k}${e==null?void 0:e.details_image}`,className:"d-block w-100",alt:e.course_name})})})})}),s.jsx("div",{className:"course-fee-mover",children:s.jsx("p",{className:"course-price details-page-price",style:{display:"flex",alignItems:"center",gap:"6px"},children:(e==null?void 0:e.offer_price)===0?s.jsx("span",{className:"discount-price",children:"Free"}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"mrp-price",children:["₹ ",e==null?void 0:e.price]}),"₹ ",e==null?void 0:e.offer_price,s.jsxs("span",{className:"discount-price",children:[e==null?void 0:e.discount,(e==null?void 0:e.discount_type)==="percentage"?"%":"₹"," ","Off"]})]})})}),s.jsxs("div",{className:"course-cart-detail-card",children:[s.jsx("h4",{children:"Payment Details"}),s.jsx("table",{children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"text",children:"Price"}),s.jsxs("td",{className:"text-end",children:["₹ ",e==null?void 0:e.offer_price]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"text",children:"Coupon Discount"}),s.jsxs("td",{className:"text-primery text-end",children:["- ₹ ",e==null?void 0:e.discount_amount]})]}),s.jsxs("tr",{children:[s.jsx("th",{className:"text",children:"Total Payable Amount"}),s.jsxs("td",{className:"text-end",children:["₹"," ",(((e==null?void 0:e.total_amount)||0)-((e==null?void 0:e.gst_amount)||0)).toFixed(2)]})]})]})}),s.jsxs("div",{className:"buy-btns-details-mover",children:[s.jsx("div",{className:"cart-action-btn",children:e!=null&&e.is_paid?s.jsx("a",{className:"pay-now-btn btn",onClick:t=>t.preventDefault(),children:"Already Enrolled"}):(e==null?void 0:e.total_amount)===0?s.jsx("a",{onClick:E,className:"pay-now-btn btn",children:"Enroll Now"}):s.jsxs("a",{onClick:E,className:"pay-now-btn btn",children:["Pay Now ₹"," ",(((e==null?void 0:e.total_amount)||0)-((e==null?void 0:e.gst_amount)||0)).toFixed(2)]})}),!(e!=null&&e.is_paid)&&s.jsxs("div",{className:"apply-coupon-card-inpu",children:[s.jsx("div",{className:"apply-coupon-inputs-align",children:d&&s.jsxs(s.Fragment,{children:[s.jsx("img",{src:"/assets/img/discount.svg",alt:"Discount Icon",className:"img-fluid"}),s.jsx("input",{value:d,type:"text",placeholder:"Enter Coupon Code",className:"form-control",onChange:t=>y(t.target.value),disabled:!I}),d&&!I?s.jsxs("button",{type:"button",className:"apply-coupon-btn remove-coupon-btn",onClick:q,children:[s.jsx("i",{className:"fa fa-times"})," "]}):s.jsx("button",{type:"button",className:"apply-coupon-btn",onClick:()=>O(d),children:"Apply"})]})}),s.jsx("div",{className:"text-center my-3",children:s.jsxs("button",{onClick:()=>{N?($(),_(!0)):F()},className:"btn prdt-modal-open",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:["View Coupon Code"," ",s.jsx("i",{className:"fa-solid fa-angle-right"})]})})]})]}),s.jsxs("div",{className:"course-right-footer-sec d-none d-lg-block",children:[s.jsxs("div",{className:"pay-throw-images",children:[s.jsx("img",{src:"/assets/img/Visa.png",alt:"#",className:"trans-img"}),s.jsx("img",{src:"/assets/img/Mastercard.png",alt:"#",className:"trans-img"}),s.jsx("img",{src:"/assets/img/PayPal.png",alt:"#",className:"trans-img"}),s.jsx("img",{src:"/assets/img/GooglePay.png",alt:"#",className:"trans-img"}),s.jsx("img",{src:"/assets/img/GooglePay-1.png",alt:"#",className:"trans-img"})]}),s.jsx("div",{className:"note-cart-items",children:s.jsx("p",{className:"text-center",children:"Safe and secure payment | 100% Authentic resources"})})]})]})]}),s.jsx("div",{className:"course-details-right-card mt-4",children:(f==null?void 0:f.length)>0&&s.jsxs("div",{className:"course-service-section mt-4",children:[s.jsx("h5",{className:"text-center",style:{fontWeight:"bold",marginBottom:"10px"},children:"Our Services"}),s.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"15px",justifyContent:"center"},children:f.map(t=>s.jsxs("div",{style:{width:"100px",textAlign:"center"},children:[s.jsx("img",{src:`${k}${t.image}`,alt:t.title,style:{width:"60px",height:"60px",objectFit:"contain",marginBottom:"5px"}}),s.jsx("p",{style:{fontSize:"12px",margin:0},children:t.title})]},t.id))})]})})]})})]})})}),s.jsx(ts,{show:H,onClose:()=>_(!1),onApply:O,coupons:G,loading:L})]})};export{ps as default};
