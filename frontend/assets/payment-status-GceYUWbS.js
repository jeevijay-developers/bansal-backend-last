import{k as h,r as t,u as f,y as l,p as x,b as y,j as e}from"./index-BxtmL2gZ.js";const j=()=>{const a=h(),[o,c]=t.useState(!0),[n,r]=t.useState(null),{token:d,logout:m}=f();t.useEffect(()=>{const s=new URLSearchParams(a.search).get("order_id");s?u(s):(l.error("No order ID found in URL"),c(!1),r(!1))},[a.search]);const u=async i=>{try{const s=await x(y.verifyCashFreeOrder,{order_id:i},d,m);s.success&&s.redirectUrl?(setTimeout(()=>{window.location.href=s.redirectUrl},1e3),r(!0)):(setTimeout(()=>{window.location.href=s.redirectUrl},1e3),r(!1))}catch(s){l.error("Error verifying payment."),r(!1),console.error(s)}finally{c(!1)}};return o?e.jsxs("div",{className:"d-flex justify-content-center align-items-center vh-100",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"ms-2 fs-5",children:"Checking payment status..."})]}):e.jsx("div",{className:"container d-flex justify-content-center align-items-center vh-100",children:e.jsxs("div",{className:"card shadow-sm p-4 text-center",style:{maxWidth:"400px",width:"100%"},children:[n===!0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"bi bi-check-circle-fill text-success",style:{fontSize:"3rem"}})}),e.jsx("h2",{className:"text-success mb-3",children:"Payment Successful!"}),e.jsx("p",{className:"mb-0",children:"Thank you for your purchase."})]}),n===!1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"bi bi-x-circle-fill text-danger",style:{fontSize:"3rem"}})}),e.jsx("h2",{className:"text-danger mb-3",children:"Payment Failed or Pending"}),e.jsx("p",{className:"mb-3",children:"Please try again or contact support."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Retry"})]})]})})};export{j as default};
