import{r as i,u as F,k as B,A as O,p as P,b as R,j as s,L as v,I as $}from"./index-Ctt4qEPS.js";const M=()=>{var f;const[d,N]=i.useState([]),[m,h]=i.useState(""),[c,p]=i.useState("all"),[o,x]=i.useState("none"),[r,g]=i.useState("all"),[b,C]=i.useState([]),{token:y,logout:S}=F(),_=B();i.useEffect(()=>{O.init(),w()},[]);const w=async()=>{var e,l,j;try{const n=(await P(R.courses,{},y,S)).data.filter(t=>t.courses&&t.courses.length>0);N(n);const k=n.flatMap(t=>t.courses),L=[...new Set(k.map(t=>t.class_name).filter(Boolean))];C(L);const A=(e=_.state)==null?void 0:e.selectedCategory,E=((l=n.find(t=>t.slug===A))==null?void 0:l.slug)||((j=n[0])==null?void 0:j.slug)||"";h(E)}catch(u){console.error("Error fetching course:",u)}};let a=((f=d.find(e=>(e==null?void 0:e.slug)===m))==null?void 0:f.courses)||[];return c!=="all"&&(a=a.filter(e=>{var l;return((l=e.batch_type)==null?void 0:l.toLowerCase())===c})),r!=="all"&&(a=a.filter(e=>{var l;return((l=e.class_name)==null?void 0:l.toLowerCase())===r.toLowerCase()})),o==="asc"?a=[...a].sort((e,l)=>e.offer_price-l.offer_price):o==="desc"&&(a=[...a].sort((e,l)=>l.offer_price-e.offer_price)),s.jsx("section",{className:"overflow-hidden",children:s.jsx("div",{className:"listing-page-section",style:{paddingTop:"70px"},children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"listing-page-top mb-4 row align-items-center",children:[s.jsxs("div",{className:"col-md-4 mb-3",children:[s.jsxs("h2",{className:"heading mb-4",children:["Explore All Our ",s.jsx("span",{className:"course-heading-span",children:"Courses"})]}),s.jsx("p",{className:"text",children:"Explore Our Wide Range Of Courses To Expand Your Skills"})]}),s.jsx("div",{className:"col-md-8",children:s.jsxs("div",{className:"row align-items-end",children:[s.jsx("div",{className:"col-md-3 mb-2",children:s.jsxs("select",{className:"form-control",value:c,onChange:e=>p(e.target.value),children:[s.jsx("option",{value:"all",children:"Select Batch Type"}),s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"offline",children:"Offline"})]})}),s.jsx("div",{className:"col-md-3 mb-2",children:s.jsxs("select",{className:"form-control",value:o,onChange:e=>x(e.target.value),children:[s.jsx("option",{value:"none",children:"Sort By Price"}),s.jsx("option",{value:"asc",children:"Low to High"}),s.jsx("option",{value:"desc",children:"High to Low"})]})}),s.jsx("div",{className:"col-md-3 mb-2",children:s.jsxs("select",{className:"form-control",value:r,onChange:e=>g(e.target.value),children:[s.jsx("option",{value:"all",children:"Select Class"}),b.map(e=>s.jsx("option",{value:e,children:e},e))]})}),s.jsx("div",{className:"col-md-3 mb-2",children:s.jsx("button",{className:"btn btn-outline-secondary w-100",onClick:()=>{p("all"),x("none"),g("all")},children:"Reset Filters"})})]})})]}),s.jsx("div",{className:"category-filter-tabs",children:s.jsx("ul",{className:"courses-tabs mb-4",style:{backgroundColor:"var(--background-light)"},children:d.map(e=>s.jsx("li",{className:"nav-item",children:s.jsx("button",{className:`nav-link ${m===e.slug?"active":""}`,onClick:()=>h(e.slug),children:e.category_name})},e.slug))})}),s.jsx("div",{className:"listing-page-nav",children:s.jsx("ul",{className:"listing-page-listings",children:a.map(e=>s.jsx("li",{className:"category-filter-card","data-aos":"flip-right",children:s.jsxs("div",{className:"listing-page-card",children:[s.jsxs(v,{to:`/course/${e.slug}`,className:"text-decoration-none text-dark d-block",children:[s.jsxs("div",{style:{position:"relative"},children:[s.jsx("img",{src:`${$}${e.image}`,alt:e.course_name,className:"img-fluid"}),s.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",backgroundColor:"#ff5722",color:"#fff",padding:"5px 10px",fontSize:"0.8rem",fontWeight:"bold",borderRadius:"4px",zIndex:1,whiteSpace:"nowrap"},children:["Batch: ",e.batch_type||"N/A"," | Class: ",e.class_name||"N/A"]})]}),s.jsx("span",{className:"category-badge",children:e==null?void 0:e.category_name}),s.jsx("h3",{className:"listing-card-name",children:e==null?void 0:e.course_name}),s.jsx("p",{children:e==null?void 0:e.title_heading}),s.jsx("p",{className:"course-price mb-3",children:e.offer_price==0?s.jsx(s.Fragment,{children:"Free"}):s.jsxs(s.Fragment,{children:["₹",e.offer_price," ",s.jsxs("span",{className:"mrp-price",children:["₹",e==null?void 0:e.price]})," ",s.jsxs("span",{className:"discount-price",children:[(e==null?void 0:e.discount_type)==="percentage"?(e==null?void 0:e.discount)+"%":"₹ "+(e==null?void 0:e.discount)," ","OFF"]})]})})]}),s.jsx("div",{className:"course-card-bottom text-center",children:s.jsx(v,{to:`/course/${e.slug}`,className:"btn-block btn course-action-btn-white d-block",children:"View Details"})})]})},e.id))})})]})})})};export{M as default};
