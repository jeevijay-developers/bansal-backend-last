import{r as n,u as N,k as C,h as S,p as k,b as L,j as s,a as A,L as E,I as $}from"./index-BQYRzkNz.js";const I=()=>{var d;const[l,g]=n.useState([]),[m,f]=n.useState(""),[h,r]=n.useState(!1),{token:x,logout:j}=N(),c=C(),i=S();n.useEffect(()=>{var t;const e=((t=c.state)==null?void 0:t.selectedCity)||"kota";p(e)},[(d=c.state)==null?void 0:d.selectedCity]);const p=async e=>{r(!0);try{const t=await k(L.getOfflineCenter,{city:e},x,j),{success:v,cities:a}=t;if(!v||!(a!=null&&a.length)){i("/");return}g(a);const u=a.find(o=>o.slug===e)||a.find(o=>o.slug==="kota");if(!u){i("/");return}f(u.slug)}catch(t){console.error("Error fetching centers:",t)}finally{r(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(A,{visible:h}),s.jsx("section",{className:"ocenter-city-section",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"row",children:l==null?void 0:l.filter(e=>e.total_centers!==0).map(e=>s.jsx("div",{className:"col-sm-6 col-lg-4 col-xl-3 mb-4",children:s.jsx(E,{to:`/centers/${e.slug}`,state:{selectedCity:e.slug},className:"text-decoration-none city-hover-ef",children:s.jsxs("div",{className:`city-card ${m===e.slug?"active":""}`,children:[s.jsx("img",{src:`${$}${e==null?void 0:e.image}`,alt:e==null?void 0:e.title,className:"img-fluid"}),s.jsx("h4",{className:"city-name",children:e==null?void 0:e.title})]})})},e==null?void 0:e.id))})})})]})};export{I as default};
