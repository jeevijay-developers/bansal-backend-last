import{r as h,g as _,f as w,h as T,u as C,i as S,j as s,a as E,L as x,I as F,p as b,b as u,y as c}from"./index-CP6fAdNq.js";const A=()=>{const[f,o]=h.useState(!1),[e,j]=h.useState(null),{setTotalCartItemsHeader:p}=_(),{slug:r}=w(),g=T(),{token:l,logout:t,isLogin:d,userDetails:n}=C(),{openLogin:N}=S(),m=async()=>{o(!0);try{const i=(n==null?void 0:n.id)||null,a=await b(u.bookDetails,{user_id:i,slug:r},l,t);if(a.success){const y=a.data;j(y)}else c.error("Failed to fetch book details")}catch(i){console.error("Error fetching book details:",i),c.error("Something went wrong while fetching book details.")}finally{o(!1)}};h.useEffect(()=>{r&&m()},[r]);const v=async i=>{if(!d){g("/login");return}o(!0);try{const a=await b(u.addToCart,{item_id:i,item_type:"book"},l,t);a.success?(c.success(a.message),await m(),p(a.total_cart_items)):c.error(a.message)}catch(a){console.error(a),c.error("Something went wrong.")}finally{o(!1)}},k=async i=>{o(!0);try{const a=await b(u.addToCart,{item_id:i,item_type:"book"},l,t);a.success?(c.success(a.message),await m(),p(a.total_cart_items)):c.error(a.message)}catch(a){console.error(a),c.error("Failed to remove from cart")}finally{o(!1)}};return f?s.jsx(E,{visible:!0}):e?s.jsx(s.Fragment,{children:s.jsx("div",{className:"book-details-page",children:s.jsxs("div",{className:"container",children:[s.jsxs("p",{className:"book-details-page-links",children:[s.jsx(x,{to:"/",children:"Home"})," / ",s.jsx(x,{to:"/books",children:"Books"})," /"," ",e.book_name]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-lg-6 col-xl-5 mb-4",children:s.jsx("div",{className:"book-details-images",children:s.jsx("div",{className:"main-image-book-details",children:s.jsx("img",{src:`${F}${e.image}`,alt:"Main Book",className:"img-fluid"})})})}),s.jsx("div",{className:"col-lg-6 col-xl-7 mb-4",children:s.jsxs("div",{className:"book-details-right-card",children:[s.jsx("div",{className:"bdp-top-badges",children:s.jsxs("span",{className:"bdp-top-right-badge",children:["Edition - ",e.batch_year||"2025"]})}),s.jsx("h2",{className:"heading mb-4 book-detail-title",children:e.title_heading}),s.jsxs("div",{className:"book-details-price",children:[s.jsxs("p",{className:"book-offer-price",children:["₹",e.offer_price]}),e.offer_price<e.price&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"book-max-price",children:["₹",e.price]}),s.jsxs("span",{className:"book-discount-badge",children:["Off ",Math.round((e.price-e.offer_price)/e.price*100),"%"]})]})]}),s.jsx("p",{className:"book-details-price-note",children:"Tax included. Shipping calculated at checkout."}),s.jsx("div",{className:"book-details-page-actions",children:s.jsx(s.Fragment,{children:d?s.jsx(s.Fragment,{children:s.jsx("a",{onClick:i=>{if(i.preventDefault(),!d){g("/login");return}e!=null&&e.is_cart?k(e.id):v(e.id)},className:`btn ${e!=null&&e.is_cart?"btn course-action-btn-prime bg-danger":"btn course-action-btn-prime"} w-100`,children:e!=null&&e.is_cart?"Remove from Cart":"Add to Cart"})}):s.jsx("button",{className:"btn course-action-btn-primary btn-primary",onClick:N,children:"Add to Cart"})})}),s.jsx("div",{className:"book-details-accordion",children:s.jsxs("div",{className:"accordion accordion-flush",id:"accordionFlushExample",children:[s.jsxs("div",{className:"accordion-item",children:[s.jsx("h2",{className:"accordion-header",id:"flush-headingOne",children:s.jsx("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"true","aria-controls":"flush-collapseOne",children:"Product Description"})}),s.jsx("div",{id:"flush-collapseOne",className:"accordion-collapse collapse show","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample",children:s.jsx("div",{className:"accordion-body",dangerouslySetInnerHTML:{__html:e.description||"No description available"}})})]}),s.jsxs("div",{className:"accordion-item",children:[s.jsx("h2",{className:"accordion-header",id:"flush-headingTwo",children:s.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo","aria-expanded":"false","aria-controls":"flush-collapseTwo",children:"Book Structure"})}),s.jsx("div",{id:"flush-collapseTwo",className:"accordion-collapse collapse","aria-labelledby":"flush-headingTwo","data-bs-parent":"#accordionFlushExample",children:s.jsx("div",{className:"accordion-body",children:e.content||"No structure information available"})})]})]})}),s.jsx("div",{className:"book-details-bottom-cards mt-4",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-4 mb-4",children:s.jsxs("div",{className:"bdb-card bdb-card-1",children:[s.jsx("img",{src:"/assets/img/bd-1.png",alt:"#",className:"img-fluid"}),s.jsx("h4",{children:"Safe and Secure Payments"})]})}),s.jsx("div",{className:"col-md-4 mb-4",children:s.jsxs("div",{className:"bdb-card bdb-card-2",children:[s.jsx("img",{src:"/assets/img/bd-2.png",alt:"#",className:"img-fluid"}),s.jsx("h4",{children:"Easy Returns and Refund"})]})}),s.jsx("div",{className:"col-md-4 mb-4",children:s.jsxs("div",{className:"bdb-card bdb-card-3",children:[s.jsx("img",{src:"/assets/img/bd-3.png",alt:"#",className:"img-fluid"}),s.jsx("h4",{children:"Guaranteed Shipping"})]})})]})})]})})]})]})})}):s.jsx("div",{children:"No book details found."})};export{A as default};
