import{r as n,j as t,M as T,p,b as m,U as h}from"./index-BQYRzkNz.js";const O=()=>{const[i,y]=n.useState(""),[a,b]=n.useState(""),[c,x]=n.useState(1),[d,l]=n.useState(!1),[g,u]=n.useState(""),[f,S]=n.useState("success"),o=(e,r="success")=>{u(e),S(r),setTimeout(()=>u(""),4e3)},w=async()=>{var e,r;if(!i||i.length!==10){o("Please enter a valid 10-digit mobile number.","error");return}l(!0);try{const s=await p(m.login,{mobileNumber:i},{headers:{"Content-Type":"application/json"}});s.success?(o(s.message,"success"),x(2)):o(s.message||"Failed to send OTP","error")}catch(s){h.isAxiosError(s)?o(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Something went wrong","error"):o("Something went wrong","error")}finally{l(!1)}},j=async()=>{var e,r;if(!a||a.length!==4){o("Please enter a valid 4-digit OTP.","error");return}l(!0);try{const s=await p(m.userDeleteVerifyOtp,{mobileNumber:i,otp:a},{headers:{"Content-Type":"application/json"}});s.success?(o(s.message,"success"),setTimeout(()=>window.location.reload(),2e3)):o(s.message||"OTP verification failed","error")}catch(s){h.isAxiosError(s)?o(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Something went wrong","error"):o("Something went wrong","error")}finally{l(!1)}};return n.useEffect(()=>{const e=document.querySelector("header"),r=document.querySelector("footer");return e&&(e.style.display="none"),r&&(r.style.display="none"),()=>{e&&(e.style.display=""),r&&(r.style.display="")}},[]),t.jsx("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)",padding:20},children:t.jsxs("div",{style:{width:"100%",maxWidth:400,backgroundColor:"#fff",borderRadius:15,boxShadow:"0 8px 20px rgba(0,0,0,0.15)",padding:30,textAlign:"center"},children:[t.jsx("a",{href:T,children:t.jsx("img",{src:"/assets/img/logo.png",alt:"Logo",className:"img-fluid"})}),t.jsx("h2",{style:{marginBottom:20,color:"#333"},children:"Delete Account"}),g&&t.jsx("div",{style:{marginBottom:15,padding:10,backgroundColor:f==="success"?"#d4edda":"#f8d7da",color:f==="success"?"#155724":"#721c24",borderRadius:6,fontWeight:500},children:g}),c===1&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"tel",placeholder:"Enter Mobile Number",value:i,onChange:e=>y(e.target.value.replace(/\D/g,"")),maxLength:10,style:{width:"100%",padding:12,marginBottom:15,borderRadius:8,border:"1px solid #ccc",outline:"none",fontSize:16}}),t.jsx("button",{type:"button",onClick:w,disabled:d,style:{width:"100%",padding:12,borderRadius:8,border:"none",background:"#ff6b6b",color:"#fff",fontSize:16,fontWeight:600,cursor:"pointer"},children:d?"Sending OTP...":"Send OTP"})]}),c===2&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"tel",placeholder:"Enter OTP",value:a,onChange:e=>b(e.target.value.replace(/\D/g,"")),maxLength:4,style:{width:"100%",padding:12,marginBottom:15,borderRadius:8,border:"1px solid #ccc",outline:"none",fontSize:16}}),t.jsx("button",{type:"button",onClick:j,disabled:d,style:{width:"100%",padding:12,borderRadius:8,border:"none",background:"#ff6b6b",color:"#fff",fontSize:16,fontWeight:600,cursor:"pointer"},children:d?"Verifying...":"Verify OTP & Delete Account"})]})]})})};export{O as default};
